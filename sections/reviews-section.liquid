{% comment %}
{% stylesheet %}
  .reviews
    .ElementsWidget-prefix
    .ElementsWidget--expandedFilters:not(.R-MD)
    .ElementsWidget__subheader
    .subheader__group--filters
    .c-searchFilters
    .c-searchFilters__filters
    .R-DropUpDownMenu {
    position: absolute;
    z-index: 3;
  }
  .reviews
    .ElementsWidget-prefix
    .ElementsWidget--expandedFilters:not(.R-MD)
    .ElementsWidget__subheader
    .subheader__group--filters
    .c-searchFilters
    .c-searchFilters__filters {
    margin-bottom: 48px;
  }

  .review-filter-container {
    background: white;
  }

  .image-magnify-full-size {
    position: absolute;
    width: 100%;
    height: 100%;
    inset: 0;
    z-index: 1;
    cursor: zoom-out;
  }
  .reviews .ElementsWidget-prefix .ElementsWidget .R-ContentList .R-ContentList__item .item__meta {
    width: auto;
    position: absolute;
    top: 0;
    left: 0;
    border: none;
  }
  .reviews .ElementsWidget-prefix .ElementsWidget .R-ContentList .R-ContentList__item .item__review {
    padding: 0;
  }
  .reviews .ElementsWidget-prefix .ElementsWidget .R-ContentList .R-ContentList__item .item__inner {
    padding-top: 25px;
  }
  .reviews .ElementsWidget-prefix .ElementsWidget .cssVar-authorName {
    font-weight: 400;
    color: #1c355e;
  }

  .reviews .R-DropUpDownMenu__inner {
    display: flex;
    flex-direction: row-reverse;
    justify-content: center;
    gap: 8px;
  }

  .reviews
    .ElementsWidget-prefix
    .ElementsWidget--expandedFilters:not(.R-MD)
    .ElementsWidget__subheader
    .subheader__group--tabs,
  .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__media {
    display: none;
  }

  .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__header .header__inner {
    display: flex;
    flex-direction: column;
    flex-basis: 100%;
    justify-content: flex-start;
    align-items: center;
    margin-left: 0;
    margin-right: 0;
  }

  .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__header .header__group--left {
    display: flex !important;
    flex-direction: column-reverse;
    align-items: center;
    width: auto;
    height: auto;
    padding: 0;
    margin: 0 auto;
    font-size: var(--base-font-size, 16px);
    flex-basis: auto;
    flex-shrink: 0;
  }

  .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__header .header__group .R-Button {
    margin: 0 !important;
    min-width: 200px;
  }

  .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__form .R-Button--submit,
  .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__form .R-Button--cancel,
  .reviews .ElementsWidget-prefix .R-Button--primary {
    position: relative;
  }

  .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__form .R-Button--submit {
    display: flex;
    justify-content: center;
    margin-top: 20px;
    margin-bottom: 0;
  }

  .reviews
    .ElementsWidget-prefix
    .ElementsWidget--expandedFilters:not(.R-MD)
    .ElementsWidget__subheader
    .subheader__group--filters
    .c-searchFilters,
  .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__subheader,
  .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__header {
    border: none;
    margin-bottom: 48px !important;
  }

  .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__header .header__group--right {
    flex-basis: auto;
    width: auto;
    height: auto;
    padding: 0;
    margin: 0;
  }

  .reviews .ElementsWidget-prefix .R-Button--primary {
    height: auto;
    font-size: 16px;
    line-height: 24px;
    font-weight: 600;
    padding: 16px;
    background-color: transparent;
    color: #1c355e;
    text-transform: uppercase;
  }

  .reviews .ElementsWidget-prefix .ElementsWidget__inner .ElementsWidget__list .u-textCenter--all.u-marginBottom--xlg,
  .reviews
    .ElementsWidget-prefix
    .ElementsWidget__inner
    .ElementsWidget__list
    .R-ContentList-container.u-marginBottom--sm {
    margin-bottom: 0 !important;
  }

  .reviews .ElementsWidget-prefix .ElementsWidget__inner .ElementsWidget__list .R-PaginationControls {
    margin-top: 48px !important;
  }

  @media (max-width: 1279px) {
    .reviews .ElementsWidget-prefix .R-Button--primary {
      background: #1c355e;
      color: #f4f0e8;
    }
  }

  .reviews .R-DropUpDownMenu__item.u-cursorDefault.c-dropdown__group__heading div {
    min-width: 175px;
    height: 48px;
    display: flex;
    align-items: center;
    font-size: 12px;
    line-height: 16px;
    font-weight: 600;
    letter-spacing: 0.5px;
    padding: 16px 50px 16px 16px;
  }

  .reviews .ElementsWidget-prefix .R-DropUpDownMenu .R-DropUpDownMenu__inner {
    padding: 0;
  }

  .reviews
    .ElementsWidget-prefix
    .ElementsWidget--expandedFilters:not(.R-MD)
    .ElementsWidget__subheader
    .subheader__group--filters
    .c-searchFilters
    .c-searchFilters__filters
    .R-DropUpDownMenu
    .R-DropUpDownMenu__inner
    .c-filters__dropdown__group {
    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
    margin: 0 !important;
  }

  .reviews
    .ElementsWidget-prefix
    .ElementsWidget--expandedFilters:not(.R-MD)
    .ElementsWidget__subheader
    .subheader__group--filters {
    margin-bottom: 0;
  }

  .review-filter-container {
    overflow: hidden;
    height: 48px;
    transition: height 0.3s ease;
    position: relative;
    border: 1px solid #d6d3e9;
  }

  .reviews .ElementsWidget-prefix .ElementsWidget--expandedFilters:not(.R-MD) .ElementsWidget__subheader {
    padding: 0;
  }
  .reviews
    .ElementsWidget-prefix
    .ElementsWidget.ElementsWidget--expandedFilters
    .ElementsWidget__inner
    .ElementsWidget__subheader {
    padding: 0;
    margin: 0 !important;
  }

  .reviews
    .ElementsWidget-prefix
    .ElementsWidget--expandedFilters:not(.R-MD)
    .ElementsWidget__subheader
    .subheader__group--filters
    .c-searchFilters
    .c-searchFilters__filters
    .R-DropUpDownMenu
    .c-filters__dropdown__clearButton {
    display: none;
    opacity: 0;
  }

  .reviews
    .ElementsWidget-prefix
    .R-DropUpDownMenu
    .R-DropUpDownMenu__item
    .R-TextBody.R-TextBody--xxxs.u-marginBottom--none {
    font-size: 12px;
    line-height: 16px;
    padding: 8px 16px;
  }

  .reviews .c-dropdown__group__heading {
    min-width: 175px;
    height: 48px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    padding: 0 10px;
    background-color: #fff;
    border: none;
    position: relative;
  }

  .review-filter-container .c-filters__dropdown__group:first-child .c-dropdown__group__heading::after {
    content: '';
    position: absolute;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    width: 24px;
    height: 24px;
    background-image: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="%231C355E" stroke-width="1.54"><path d="M1 7L12 18L23 7"/></svg>');
    background-size: contain;
    background-repeat: no-repeat;
    transition: transform 0.3s ease;
  }

  .review-filter-container.open .c-filters__dropdown__group:first-child .c-dropdown__group__heading::after {
    transform: translateY(-50%) rotate(180deg);
  }

  .dropdown-content {
    display: flex;
    flex-direction: column;
    padding: 10px;
    background-color: #fff;
    border: 1px solid #ccc;
    border-top: none;
    visibility: hidden;
    opacity: 0;
    transition: visibility 0s, opacity 0.3s ease;
  }

  .review-filter-container.open .dropdown-content {
    visibility: visible;
    opacity: 1;
  }

  .review-filter-container.open {
    height: auto;
    z-index: 2;
  }

  .review-filter-container.open .dropdown-icon {
    transform: rotate(180deg);
  }

  .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__form .R-Button--cancel {
    margin-right: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    text-transform: uppercase;
    margin-bottom: 0;
    margin-top: 20px;
  }

  .reviews .header__group--left .R-TextBody {
    font-size: 14px;
    line-height: 20px;
    font-weight: 600;
    color: #1c355e;
    text-transform: capitalize;
    order: 4;
    border: none !important;
    padding: 0 !important;
    margin-bottom: 2px !important;
  }

  .reviews .header__group--left h3 {
    font-family: Hatton, serif;
    font-size: 40px;
    line-height: 52px;
    font-weight: 400;
    color: #1c355e;
    order: 3;
    margin-bottom: 2px;
  }

  .reviews .header__group--left > .R-RatingStars {
    order: 2;
    height: 16px;
    margin-bottom: 24px;
  }
  .reviews .header__group--left .R-RatingStars .R-RatingStars__stars {
    height: 16px;
    margin-right: 0;
  }

  .reviews .header__group--left .R-RatingStars .R-RatingStars__stars span {
    height: 16px;
    display: flex;
    align-items: center;
  }

  .reviews .header__group--left .R-TextHeading {
    font-size: 14px;
    line-height: 20px;
    font-weight: 400;
    color: #1c355e;
    order: 1;
    margin: 0 0 8px !important;
  }

  .reviews .ElementsWidget-prefix .R-TextHeading--xxs {
    font-size: 22px;
    line-height: 28px;
    margin-bottom: 11px;
  }

  .reviews .ElementsWidget-prefix .R-TextBody--xs {
    font-size: 14px;
    line-height: 20px;
    margin: 0;
    padding-bottom: 16px;
  }

  .reviews .ElementsWidget-prefix .ElementsWidget .R-ContentList .R-ContentList__item {
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    position: relative;
    flex-basis: 100%;
    width: 100%;
    flex-shrink: 0;
    margin-bottom: 24px;
    border-bottom: none;
    padding-bottom: 0;
  }

  .reviews .ElementsWidget-prefix .u-marginBottom--md {
    margin-bottom: 0 !important;
  }

  .reviews .ElementsWidget-prefix .ElementsWidget--expandedFilters {
    margin-bottom: 0 !important;
  }

  .reviews .ElementsWidget-prefix .ElementsWidget .R-ContentList .R-ContentList__item .item__review .R-RatingStars {
    margin-left: 0;
  }

  .reviews .R-flex-row.R-flex-row--noMargin.R-flex-between-xxs.R-flex-bottom-xxs .u-marginBottom--sm {
    margin: 0 !important;
  }

  .reviews .ElementsWidget-prefix .R-LabelTag--sm {
    padding: 0;
    border: none;
  }

  .R-ContentList-container
    .R-ContentList
    .item__review
    .R-TextBody.R-TextBody--xxxs.u-textRight--all.u-marginBottom--none {
    position: absolute;
    top: 0;
    right: 0;
    font-size: 11px;
    line-height: 13px;
    font-weight: 400;
  }

  .reviews .ElementsWidget-prefix {
    max-width: 1112px;
    margin: 0 auto;
  }

  .reviews .ElementsWidget-prefix .u-marginBottom--sm {
    margin-bottom: 48px !important;
  }

  .reviews .ElementsWidget-prefix .ElementsWidget .R-ContentList .R-ContentList__item:last-child {
    margin-bottom: 0 !important;
  }

  .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__footer .footer__reviewsLogo-container {
    display: none !important;
    opacity: 0 !important;
  }

  .reviews .ElementsWidget-prefix .R-TextHeading--xxxxs {
    font-size: 16px;
    line-height: 24px;
    font-weight: 400;
    margin-right: 8px !important;
  }

  .reviews .u-marginBottom--md .R-RatingStars span {
    height: 16px;
    display: flex;
    align-items: center;
  }

  .reviews .ElementsWidget-prefix .R-PaginationControls .R-PaginationControls__item {
    width: 36px;
    height: 36px;
    display: flex;
    margin: 0 8px !important;
    padding: 0 !important;
    font-size: 14px;
    line-height: 20px;
    font-weight: 600;
    border: none;
    color: #1c355e;
    cursor: default;
    align-items: center;
    justify-content: center;
  }

  .reviews .ElementsWidget-prefix .R-PaginationControls .R-PaginationControls__item:hover {
    cursor: pointer;
  }

  .reviews .ElementsWidget-prefix .R-PaginationControls .R-PaginationControls__item.isActive {
    width: 36px;
    height: 36px;
    display: flex;
    margin: 0 8px !important;
    padding: 0 !important;
    font-size: 14px;
    line-height: 20px;
    font-weight: 600;
    border: 1px solid #1c355e;
    color: #1c355e;
    align-items: center;
    justify-content: center;
  }

  .reviews .ElementsWidget-prefix .R-PaginationControls .R-PaginationControls__item > .R-TextBody,
  .reviews .ElementsWidget-prefix .R-PaginationControls .R-PaginationControls__item > .R-TextHeading {
    margin-bottom: 0 !important;
  }

  .reviews
    .R-DropUpDownMenu.R-DropUpDownMenu--md.R-DropUpDownMenu--maxHeight380.u-paddingBottom--none.js-demo-sortdropdown.u-hidden--all {
    position: relative;
    opacity: 1;
    transform: scale(1, 1) translateY(0px);
    pointer-events: auto;
    width: 100%;
    box-shadow: none;
    padding: var(--filters-panel-vertical-padding, 0) var(--filters-panel-horizontal-padding, 0) !important;
    display: flex !important;
    flex-direction: column;
  }
  .reviews .ElementsWidget-prefix .u-hr,
  .reviews .subheader__group.subheader__group--tabs.u-textRight--all,
  .reviews
    .R-TextHeading.R-TextHeading--xxxs.R-TextHeading--inline.u-cursorPointer.u-marginBottom--sm.u-marginRight--sm.c-filters__triggerButton {
    display: none;
  }

  .reviews
    .subheader__group
    .R-TabControls
    .R-TabControls__item
    .R-DropUpDownMenu__item.u-cursorDefault.u-paddingTop--none.u-paddingBottom--sm.c-filters__dropdown__clearButton {
    color: #1c355e !important;
    background: transparent !important;
    border: none !important;
    display: block !important;
    position: absolute;
    top: 3px;
    right: calc(50% - 300px);
    margin: 0 !important;
  }

  .subheader__group.subheader__group--filters {
    display: flex;
    flex-direction: column;
    align-content: center;
  }

  .reviews .R-ContentList__item.u-textLeft--all .item__review .u-marginBottom--sm {
    margin-bottom: 16px !important;
  }

  .R-flex-row.R-flex-row--noMargin.R-flex-end-xxs div {
    display: flex;
    align-items: center;
  }

  .R-DropUpDownMenu__item.u-cursorDefault.u-paddingTop--none.u-paddingBottom--sm.c-filters__dropdown__clearButton {
    opacity: 0;
  }

  .R-flex-row.R-flex-row--noMargin.R-flex-between-xxs.R-flex-bottom-xxs {
    border-bottom: 1px solid #d6d3e9;
    padding-bottom: 16px;
  }

  @media (max-width: 1023px) {
    .reviews .R-DropUpDownMenu__item.u-cursorDefault.c-dropdown__group__heading div {
      min-width: 175px;
    }

    .reviews .ElementsWidget-prefix .R-DropUpDownMenu .R-DropUpDownMenu__item {
      padding: 0;
    }

    .reviews .ElementsWidget-prefix .R-TabControls {
      display: flex;
      flex-direction: column;
    }

    .reviews .ElementsWidget-prefix .R-MD .ElementsWidget__subheader .subheader__group:first-child {
      padding-bottom: 0;
      border-bottom: none;
      margin-bottom: 0;
    }

    .reviews .header__group--left .R-TextBody {
      font-size: 11px !important;
      line-height: 16px !important;
    }

    .reviews .header__group--left h3 {
      font-size: 30px;
      line-height: 40px;
    }

    .reviews .header__group--left > .R-RatingStars {
      margin-bottom: 16px;
    }
    .reviews
      .ElementsWidget-prefix
      .ElementsWidget--expandedFilters:not(.R-MD)
      .ElementsWidget__subheader
      .subheader__group--filters
      .c-searchFilters,
    .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__subheader,
    .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__header {
      border: none;
      margin-bottom: 24px !important;
    }

    .reviews .ElementsWidget-prefix .R-Button--primary {
      padding: 12px 16px;
    }
    .reviews .ElementsWidget-prefix .u-marginBottom--sm {
      margin-bottom: 24px !important;
    }
    .reviews .ElementsWidget-prefix .ElementsWidget__inner .ElementsWidget__list .R-PaginationControls {
      margin-top: 24px !important;
    }

    .reviews .ElementsWidget-prefix .R-TextHeading--xxs {
      font-size: 16px;
      line-height: 24px;
      margin-bottom: 12px;
    }
  }

  @media (max-width: 767px) {
    .reviews
      .subheader__group
      .R-TabControls
      .R-TabControls__item
      .R-DropUpDownMenu__item.u-cursorDefault.u-paddingTop--none.u-paddingBottom--sm.c-filters__dropdown__clearButton {
      color: #1c355e !important;
      background: transparent !important;
      border: none !important;
      display: block !important;
      position: relative;
      top: 48px;
      right: 0;
      margin: 0 auto!important;
      padding: 0!important;
    }

    .reviews .ElementsWidget-prefix .R-DropUpDownMenu--maxHeight380 .R-DropUpDownMenu__inner {
      width: 100%;
      position: absolute;
      top: 0;
    }

    .reviews .ElementsWidget-prefix .review-filter-container .u-marginBottom--sm {
      margin-bottom: 0 !important;
    }
  }

  @media (max-width: 673px) {
    .reviews
      .R-DropUpDownMenu.R-DropUpDownMenu--md.R-DropUpDownMenu--maxHeight380.u-paddingBottom--none.js-demo-sortdropdown.u-hidden--all {
      flex-direction: column-reverse;
    }

    .reviews
      .subheader__group
      .R-TabControls
      .R-TabControls__item
      .R-DropUpDownMenu__item.u-cursorDefault.u-paddingTop--none.u-paddingBottom--sm.c-filters__dropdown__clearButton
      .u-textDecoration--underline {
      text-decoration: none !important;
    }
  }

  @media (max-width: 512px) {
    .reviews .ElementsWidget-prefix .ElementsWidget .ElementsWidget__form .R-Button--cancel {
      margin-right: 0;
    }
    .reviews .R-flex-row.R-flex-row--noMargin.R-flex-end-xxs {
      display: flex;
      flex-direction: column-reverse;
    }
  }

  @media (max-width: 375px) {
    .reviews .R-DropUpDownMenu__item.u-cursorDefault.c-dropdown__group__heading div,
    .reviews .c-dropdown__group__heading {
      min-width: 156px;
    }
  }
{% endstylesheet %}

<div class="reviews mt-6 md:mt-12 mx-auto px-4">
  <script src="https://widget.reviews.io/polaris/build.js"></script>
  <div id="ReviewsWidget"></div>
  <script>
    new ReviewsWidget('#ReviewsWidget', {
    //Your REVIEWS.io Store ID and widget type:
    store: 'www.christy.co.uk',
    widget: 'polaris',

    //Content settings (store_review,product_review,third_party_review,questions). Choose what to display in this widget:
    options: {
        types: 'product_review',
        lang: 'en',
        //Possible layout options: bordered, large and reverse.
        layout: '',
        //How many reviews & questions to show per page?
        per_page: 3,
        store_review:{
          hide_if_no_results: true,
        },
        third_party_review:{
          hide_if_no_results: true,
        },
        product_review: {
          sku: "{{ product.variants | map: 'sku' | join: ';' }};{{ product.variants | map: 'id' | join: ';' }}",
          enable_rich_snippets: true,

          /* Your custom Structured Data */
          structured_data: {

            category: {{ product.type | json }},
            {% capture gtin_length %}{{ product.variants.first.barcode | size }}{% endcapture %}


            {% if gtin_length == "14" %}
               gtin14:"{{product.variants.first.barcode}}",
            {% elsif gtin_length == "13" %}
               gtin13:"{{product.variants.first.barcode}}",
            {% elsif gtin_length == "12" %}
               gtin12:"{{product.variants.first.barcode}}",
            {% endif %}

            url: "{{ shop.url }}{{ product.url }}",

            {%- if product.featured_image -%}
              image: "https:{{ product.featured_image | product_img_url: 'grande' }}",
            {%- endif -%}

            {% if variant.image %}
              {% assign variant_image_size = variant.image.width | append: 'x' %}
              image: "http:{{ variant.image.src | img_url: variant_image_size }}",
            {% endif %}

            description: "{{ product.description | strip_html | strip_newlines | escape }}",
            {% assign ruk_current_variant = product.selected_or_first_available_variant %}
            {% assign ruk_variant_count = product.variants | size %}
            {% assign ruk_count = 0 %}

            {% if product.variants %}
              {% assign ruk_count = ruk_count | plus: 1 %}

              offers: [{
                  type: "Offer",
                  priceCurrency: "{{ cart.currency.iso_code }}",
                  price: "{{ ruk_current_variant.price | money_without_currency }}",
                  itemCondition: "http://schema.org/NewCondition",
                  availability: "http://schema.org/{% if product.available %}InStock{% else %}OutOfStock{% endif %}",
                  url: "{{ shop.url }}{{ ruk_current_variant.url }}",

                  {% if ruk_current_variant.image %}
                      {% assign variant_image_size = ruk_current_variant.image.width | append: 'x' %}
                      image: "https:{{ ruk_current_variant.image.src | img_url: variant_image_size }}",
                  {% else %}
                      image: "https:{{ product.featured_image.src | img_url: 'grande' }}",
                  {% endif %}

                  {% if ruk_current_variant.title != 'Default Title' %}
                      name: "{{ product.title | strip_html | escape }} - {{ fa_current_variant.title | escape }}",
                  {% else %}
                      name: "{{ product.title | strip_html | escape }}",
                  {% endif %}

                  {% if ruk_current_variant.barcode.size == 12 %}
                      gtin12: "{{ ruk_current_variant.barcode }}",
                  {% endif %}

                  {% if ruk_current_variant.barcode.size == 13 %}
                      gtin13: "{{ ruk_current_variant.barcode }}",
                  {% endif %}

                  {% if ruk_current_variant.barcode.size == 14 %}
                      gtin14: "{{ ruk_current_variant.barcode }}",
                  {% endif %}

                  {% if ruk_current_variant.sku != blank %}
                      sku: "{{ ruk_current_variant.sku }}",
                  {% else %}
                      sku: "{{ ruk_current_variant.id }}",
                  {% endif %}

                  {% if product.description != blank %}
                      description: "{{ product.description | strip_html | escape | strip_newlines }}",
                  {% endif %}

                  priceValidUntil: "{{ 'now' | date: '%s' | plus: 31536000 | date: '%Y-%m-%d' | replace:' ','%20' }}"
              }],
            {% endif %}

            brand: {
              type: 'Brand',
              name: '{{ product.vendor | escape }}',
            },
          },
        },

        //Header settings:
        header:{
          enable_summary: true, //Show overall rating & review count
          enable_ratings: true,
          enable_attributes: true,
          enable_image_gallery: true, //Show photo & video gallery
          enable_percent_recommended: false, //Show what percentage of reviewers recommend it
          enable_write_review: true, //Show "Write Review" button
          enable_ask_question: false, //Show "Ask Question" button
          enable_sub_header: true, //Show subheader
          rating_decimal_places: 2,
          use_write_review_button:  false, //Show "be the first to leave a review" text as a button
          enable_if_no_results:  false, //Show header when there are no results
        },

        //Filtering settings:
        filtering:{
          enable: true, //Show filtering options
          enable_text_search: false, //Show search field
          enable_sorting: true, //Show sorting options (most recent, most popular)
          enable_product_filter: false, //Show product options filter
          enable_media_filter: true, //Show reviews with images/video/media options
          enable_overall_rating_filter: true, //Show overall rating breakdown filter
          enable_language_filter: false, // Filter by review language
          enable_language_filter_language_change: false, // Update widget language based on language selected
          enable_ratings_filters: true, //Show product attributes filter
          enable_attributes_filters: true, //Show author attributes filter
          enable_expanded_filters: true, //Show filters as a section instead of dropdown
        },

        //Review settings:
        reviews:{
          enable_avatar: false, //Show author avatar
          enable_reviewer_name:  true, //Show author name
          enable_reviewer_address:  false, //Show author location
          reviewer_address_format: 'city, country', //Author location display format
          enable_verified_badge: false, //Show "Verified Customer" badge
          enable_subscriber_badge: true, //Show "Verified Subscriber" badge
          review_content_filter: 'undefined', //Filter content
          enable_reviewer_recommends: true, //Show "I recommend it" badge
          enable_attributes: true, //Show author attributes
          enable_product_name: true, //Show display product name
          enable_review_title: undefined, //Show review title
          enable_replies: true, //Show review replies
          enable_images: true, //Show display review photos
          enable_ratings: true, //Show product attributes (additional ratings)
          enable_share: false, //Show share buttons
          enable_helpful_vote: true, //Show "was this helpful?" section
          enable_helpful_display: true, //Show how many times times review upvoted
          enable_report: true, //Show report button
          enable_date: true, //Show when review was published
          enable_third_party_source: true, //Show third party source
          enable_duplicate_reviews: undefined, //Show multiple reviews from the same user
        },
    },
    //Translation settings
    translations: {
        'Verified Customer': 'Verified Customer',
        'Breakdown': 'Rating',
        'Order By': 'Sort by'
    },
    //Style settings:
    styles: {
        //Base font size is a reference size for all text elements. When base value gets changed, all TextHeading and TexBody elements get proportionally adjusted.
        '--base-font-size': '16px',

        //Button styles (shared between buttons):
        '--common-button-font-family': 'inherit',
        '--common-button-font-size':'16px',
        '--common-button-font-weight':'500',
        '--common-button-letter-spacing':'0',
        '--common-button-text-transform':'none',
        '--common-button-vertical-padding':'10px',
        '--common-button-horizontal-padding':'20px',
        '--common-button-border-width':'2px',
        '--common-button-border-radius':'0px',

        //Primary button styles:
        '--primary-button-bg-color': '#1C355E',
        '--primary-button-border-color': '#1C355E',
        '--primary-button-text-color': '#ffffff',

        //Secondary button styles:
        '--secondary-button-bg-color': 'transparent',
        '--secondary-button-border-color': '#1C355E',
        '--secondary-button-text-color': '#1C355E',

        //Star styles:
        '--common-star-color': '#FBB116',
        '--common-star-disabled-color': 'rgba(0,0,0,0.25)',
        '--medium-star-size': '16px',
        '--small-star-size': '16px',

        //Heading styles:
        '--heading-text-color': '#1C355E',
        '--heading-text-font-weight': '600',
        '--heading-text-font-family': 'inherit',
        '--heading-text-line-height': '1.4',
        '--heading-text-letter-spacing': '0',
        '--heading-text-transform': 'none',

        //Body text styles:
        '--body-text-color': '#1C355E',
        '--body-text-font-weight': '400',
        '--body-text-font-family': 'inherit',
        '--body-text-line-height': '1.4',
        '--body-text-letter-spacing': '0',
        '--body-text-transform': 'none',

        //Input field styles:
        '--inputfield-text-font-family': 'inherit',
        '--input-text-font-size': '14px',
        '--inputfield-text-font-weight': '400',
        '--inputfield-text-color': '#1C355E',
        '--inputfield-border-color': 'rgba(0,0,0,0.2)',
        '--inputfield-background-color': 'transparent',
        '--inputfield-border-width': '1px',
        '--inputfield-border-radius': '0px',

        '--common-border-color': 'rgba(0,0,0,0.15)',
        '--common-border-width': '1px',
        '--common-sidebar-width': '190px',

        //Filters panel styles:
        '--filters-panel-bg-color': 'transparent',
        '--filters-panel-font-size': '16px',
        '--filters-panel-text-color': '16px',
        '--filters-panel-horizontal-padding': '0',
        '--filters-panel-vertical-padding': '0',

        //Slider indicator (for attributes) styles:
        '--slider-indicator-bg-color': 'rgba(0,0,0,0.1)',
        '--slider-indicator-button-color': '#1C355E',
        '--slider-indicator-width': '190px',

        //Badge styles:
        '--badge-icon-color': '#1C355E',
        '--badge-icon-font-size': 'inherit',
        '--badge-text-color': '#1C355E',
        '--badge-text-font-size': 'inherit',
        '--badge-text-letter-spacing': 'inherit',
        '--badge-text-transform': 'inherit',

        //Author styles:
        '--author-font-size': '12px',
        '--author-text-transform': 'none',

        //Author avatar styles:
        '--avatar-thumbnail-size': '60px',
        '--avatar-thumbnail-border-radius': '100px',
        '--avatar-thumbnail-text-color': '#1C355E',
        '--avatar-thumbnail-bg-color': 'rgba(0,0,0,0.1)',

        //Product photo or review photo styles:
        '--photo-video-thumbnail-size': '80px',
        '--photo-video-thumbnail-border-radius': '0px',

        //Media (photo & video) slider styles:
        '--mediaslider-scroll-button-icon-color': '#0E1311',
        '--mediaslider-scroll-button-bg-color': 'rgba(255, 255, 255, 0.85)',
        '--mediaslider-overlay-text-color': '#ffffff',
        '--mediaslider-overlay-bg-color': 'rgba(0, 0, 0, 0.8))',
        '--mediaslider-item-size': '110px',

        //Pagination & tabs styles (normal):
        '--pagination-tab-text-color': '#1C355E',
        '--pagination-tab-text-transform': 'none',
        '--pagination-tab-text-letter-spacing': '0',
        '--pagination-tab-text-font-size': '16px',
        '--pagination-tab-text-font-weight': '600',

        //Pagination & tabs styles (active):
        '--pagination-tab-active-text-color': '#1C355E',
        '--pagination-tab-active-text-font-weight': '600',
        '--pagination-tab-active-border-color': '#1C355E',
        '--pagination-tab-border-width': '3px',
    },
    });
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      function updateClearButton() {
        const items = document.querySelectorAll('.R-DropUpDownMenu__item');
        const activeItems = Array.from(items).filter((item) => item.classList.contains('isActive'));
        const clearButton = document.querySelector('.c-filters__dropdown__clearButton');

        if (!clearButton) return;
        const activeIndexes = activeItems.map(item => [...items].indexOf(item) + 1); 

        if (activeIndexes.length === 1 && [3, 4, 5, 6].includes(activeIndexes[0])) {
            clearButton.style.setProperty('opacity', '0', 'important');
        } else {
            clearButton.style.setProperty('opacity', '1', 'important');
        }
        if (!clearButton.dataset.listener) {
            clearButton.dataset.listener = "true";
            clearButton.addEventListener('click', () => {
                clearButton.style.setProperty('opacity', '0', 'important');
            });
        }
      }
      function modifyReviews() {
        const rating = document.querySelector('.reviews .header__group--left .R-TextHeading');
        const review = document.querySelector('.reviews .header__group--left .R-TextBody');
        if (rating) {
          rating.textContent += '/5 stars';
        }
        if (review) {
          review.textContent = review.textContent.replace('Based on ', '');
          const reviewsHeading = document.createElement('h3');
          reviewsHeading.textContent = 'Reviews';
          review.parentNode.insertBefore(reviewsHeading, review.previousElementSibling);
        }
      }

      const observer = new MutationObserver((mutationsList, observer) => {
        const rating = document.querySelector('.reviews .header__group--left .R-TextHeading');
        const review = document.querySelector('.reviews .header__group--left .R-TextBody');
        if (rating && review) {
          observer.disconnect();
          modifyReviews();
          const menuItems = document.querySelectorAll('.R-DropUpDownMenu__item');
          menuItems.forEach((item) => {
            item.addEventListener('click', updateClearButton);
          });
        }
      });

      observer.observe(document.body, {
        childList: true,
        subtree: true,
      });

      function wrapDropdowns() {
        const dropdownGroups = document.querySelectorAll('.c-filters__dropdown__group');

        if (dropdownGroups.length < 3) return;

        const firstContainer = document.createElement('div');
        firstContainer.classList.add('review-filter-container');

        dropdownGroups[0].parentNode.insertBefore(firstContainer, dropdownGroups[0]);
        firstContainer.appendChild(dropdownGroups[0]);
        firstContainer.appendChild(dropdownGroups[1]);

        const secondContainer = document.createElement('div');
        secondContainer.classList.add('review-filter-container');

        dropdownGroups[2].parentNode.insertBefore(secondContainer, dropdownGroups[2]);
        secondContainer.appendChild(dropdownGroups[2]);
      }

      wrapDropdowns();

      document.querySelectorAll('.review-filter-container').forEach((dropdown) => {
        const heading = dropdown.querySelector('.c-dropdown__group__heading');
        const content = dropdown.querySelector('.dropdown-content');

        heading.addEventListener('click', () => {
          const isOpen = dropdown.classList.contains('open');
          closeAllDropdowns();

          if (!isOpen) {
            dropdown.classList.add('open');
            dropdown.style.height = `auto`;
          } else {
            dropdown.classList.remove('open');
            dropdown.style.height = `48px`;
          }
        });

        dropdown.querySelectorAll('.R-TextBody.R-TextBody--xxxs.u-marginBottom--none').forEach((options) => {
          options.addEventListener('click', (e) => {
            closeAllDropdowns();
          });
        });
      });

      function closeAllDropdowns() {
        document.querySelectorAll('.review-filter-container').forEach((dropdown) => {
          dropdown.classList.remove('open');
          dropdown.style.height = '48px';
        });
      }

      document.addEventListener('click', (e) => {
        if (!e.target.closest('.review-filter-container')) {
          closeAllDropdowns();
        }
      });
    });
  </script>
</div>

{% schema %}
{
  "name": "Reviews section",
  "tag": "section",
  "class": "reviews-section",
  "settings": [],

  "presets": [
    {
      "name": "Reviews section"
    }
  ]
}
{% endschema %}
{% endcomment %}
{% stylesheet %}
 @media all and (max-width: 767px ) {
    #yotpoProductReviewContainer {
      padding-left:0px;
      padding-right:0px;
    }
}
{% endstylesheet %}  
<div class="container space-y-12 lg:space-y-24" id="yotpoProductReviewContainer">
  <div id="yotpoProductReviews" class="yotpo-widget-instance" data-yotpo-instance-id="1052099" data-yotpo-product-id="{{product.id}}" data-yotpo-name="{{ product.title | escape }}" data-yotpo-url="{{ shop.url }}{{ product.url }}" data-yotpo-image-url="{{ product.featured_image | product_img_url: "large" | prepend: "https:" | replace: '?', '%3F' | replace: '&','%26'}}" data-yotpo-price="{{ product.price | divided_by: 100.00 }}" data-yotpo-currency="{{ shop.currency }}" data-yotpo-description="{{ product.description | escape }}"></div>
</div>
