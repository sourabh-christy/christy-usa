{% assign collections = collection.metafields.custom.featured_collections.value %}

{% if collections != blank %}
  <div class="container">
    <div class="splide"
         data-splide='
        {
          "arrows": true,
          "pagination": false,
          "type": "slide",
          "gap": "3px",
          "autoWidth": true,
          "focus": 0,
          "omitEnd": true,
          "breakpoints": {
            "768": {
              "gap": "8px",
              "perPage": 2,
              "perMove": 2
            }
          }
        }
      '
    >
      <!-- track -->
      <div class="splide__track !overflow-visible">
        <ul class="splide__list">
          {% for col in collections %}
            <li class="splide__slide w-[calc(50%-4px)] md:w-[245px]">
              {% render 'collection-card', card_collection: col %}
            </li>
          {% endfor %}
        </ul>
      </div>

      <div class="splide__arrows splide__arrows--ltr splide__custom-arrows"
      >
        <button class="splide__arrow splide__arrow--prev disabled:!opacity-0">
          {% render 'icon-arrow-drop-down' %}
        </button>
        <button class="splide__arrow splide__arrow--next disabled:!opacity-0">
          {% render 'icon-arrow-drop-down' %}
        </button>
      </div>
    </div>
  </div>
{% endif %}

{% schema %}
{
  "name": "Featured Collections",
  "tag": "section",
  "class": "section-featured-collections",
  "disabled_on": {
    "groups": ["header", "footer"],
    "templates": ["article"]
  },
  "settings": [
    {
      "type": "header",
      "content": "Collection > metafields > 'Featured Collections'"
    }
  ],
  "presets": [
    {
      "name": "Featured Collections"
    }
  ]
}
{% endschema %}
