(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}function i(e,r,i){return r=a(r),function(e,r){if(r&&("object"==t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,n()?Reflect.construct(r,i||[],a(e).constructor):r.apply(e,i))}function o(t){var e="function"==typeof Map?new Map:void 0;return o=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(n())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var o=new(t.bind.apply(t,i));return r&&s(o,r.prototype),o}(t,arguments,a(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,t)},o(t)}function n(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(n=function(){return!!t})()}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}var h=function(t){function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),i(this,r,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(r,t),o=r,(n=[{key:"connectedCallback",value:function(){var t,e,r,i,o,n;window.sm_orders_gifts&&0!==window.sm_orders_gifts.length&&(this.giftThreshold=Number(null!==(t=null===(e=window.sm_orders_gifts[0])||void 0===e?void 0:e.order_minimum)&&void 0!==t?t:0),this.shippingThreshold=Number(null!==(r=null===(i=this.dataset)||void 0===i?void 0:i.shippingThreshold)&&void 0!==r?r:0),this.cartTotal=Number(null!==(o=null===(n=this.dataset)||void 0===n?void 0:n.cartTotal)&&void 0!==o?o:0),0!==this.giftThreshold&&this.init())}},{key:"init",value:function(){if(this.progressBar=this.querySelector("[data-progress-bar]"),this.deliveryProgressPoint=this.querySelector("[data-progress-point=delivery]"),this.giftProgressPoint=this.querySelector("[data-progress-point=gift]"),this.hidden=!1,0===this.shippingThreshold&&(this.deliveryProgressPoint.hidden=!0),this.giftThreshold>this.shippingThreshold)this.totalThreshold=this.giftThreshold,this.biggestThreshold="gift",this.updateDeliveryProgressPoint(),this.updateGiftProgressPoint(),this.updateProgressBar(),this.updateMessage();else if(this.shippingThreshold>this.giftThreshold)this.totalThreshold=this.shippingThreshold,this.biggestThreshold="delivery",this.updateGiftProgressPoint(),this.updateProgressBar(),this.updateMessage();else{if(this.biggestThreshold="equal",this.totalThreshold=this.shippingThreshold,this.equalProgressPoint=this.querySelector("[data-progress-point=equal]"),!this.equalProgressPoint)return;this.querySelectorAll("[data-progress-point]").forEach((function(t){return t.hidden="equal"!==t.dataset.progressPoint})),this.querySelector("[data-progress-container]").style.marginBottom="45px",this.updateMessage(),this.updateProgressPointColor(this.equalProgressPoint,this.shippingThreshold)}}},{key:"updateGiftProgressPoint",value:function(){this.giftProgressPoint.style.left="".concat(this.giftThreshold/this.totalThreshold*100,"%"),this.giftProgressPoint.hidden=!1;var t=this.giftProgressPoint.querySelector("[data-price]");t&&(t.textContent="".concat(this.dataset.currencySign).concat(this.giftThreshold.toFixed(2)))}},{key:"updateDeliveryProgressPoint",value:function(){this.deliveryProgressPoint.style.left="".concat(this.shippingThreshold/this.totalThreshold*100,"%")}},{key:"updateProgressPointColor",value:function(t,e){var r=t.querySelector("[data-point]");this.cartTotal>=e?r.style.backgroundColor="#F4F0E8":r.removeAttribute("style")}},{key:"updateProgressBar",value:function(){var t=Math.min(this.cartTotal/this.totalThreshold*100,100);this.progressBar.style.width="".concat(t,"%"),this.updateProgressPointColor(this.giftProgressPoint,this.giftThreshold),this.updateProgressPointColor(this.deliveryProgressPoint,this.shippingThreshold)}},{key:"updateMessage",value:function(){var t=this.querySelector("[data-gift-message]");if(t){var e=this.dataset.currencySign,r=this.cartTotal,i=this.shippingThreshold,o=this.giftThreshold,n=this.biggestThreshold,s={gift:"You are ".concat(e).concat((o-r).toFixed(2)," away from free gift"),shipping:"You are ".concat(e).concat((i-r).toFixed(2)," away from free standard delivery"),equal:"You are ".concat(e).concat((i-r).toFixed(2)," away from free standard delivery and free gift")},a=[];"gift"===n?(a.push({limit:i,text:s.shipping}),a.push({limit:o,text:s.gift})):"delivery"===n?(a.push({limit:o,text:s.gift}),a.push({limit:i,text:s.shipping})):a.push({limit:i,text:s.equal});for(var h=0,l=a;h<l.length;h++){var u=l[h],c=u.limit,f=u.text;if(r<c)return void(t.textContent=f)}0===this.shippingThreshold?t.innerHTML="Congratulations! <br> You have been granted Free Gift":t.innerHTML="Congratulations! <br> You have been granted Free Delivery and Free Gift"}}}])&&e(o.prototype,n),a&&e(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,n,a}(o(HTMLElement));customElements.get("cart-gift-progress-bar")||customElements.define("cart-gift-progress-bar",h)})();